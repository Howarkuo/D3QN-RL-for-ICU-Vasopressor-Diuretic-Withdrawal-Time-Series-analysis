# Metadata table and preprocessing pipeline

ðŸ©º MIMIC-IV Cardiogenic Shock Preprocessing Metadata SummaryThis document consolidates the complete preprocessing logic, item IDs, data sources, filters, unit conversions, joins, and final dataset counts used in the cardiogenic shock (CS) cohort derived from MIMIC-IV v2.2.Part 1. Variable-Level Preprocessing MetadataThis section details the specific extraction and cleaning logic applied to each variable category.1. Weight & DurationVariableItem IDsSource FileStandardizationFiltersDaily Weight224639icu/chartevents.csv.gzdaily weightvaluenum IS NOT NULL, weight > 0Admission Weight226512icu/chartevents.csv.gzadmit weightvaluenum IS NOT NULL, weight > 0Final Logic: UNION ALL (duplicates are preserved).Reference: MIT-LCP weight_durations.sql2. HeightVariableItem IDsSource FileUnit ConversionFiltersHeight226707, 226730icu/chartevents.csv.gzInch: $height_{in} = height_{cm} / 2.54$$120 \text{ cm} < \text{height} < 230 \text{ cm}$Reference: MIT-LCP height.sql3. Blood Gas & LabsSourceFileItem IDsReferenceLabshosp/labevents.csv.gzLong list (e.g., 50801â€“50825, 52033)MIT-LCP bg.sqlVitals/FiOâ‚‚icu/chartevents.csv.gzFiOâ‚‚ 223835âš™ï¸ Conversions & StandardizationGlucose: $\text{mg/dL} \rightarrow \text{mmol/L}$ (divide by 18)Temperature: $\text{Fahrenheit} \rightarrow \text{Celsius}$ (use $(\text{Â°F} - 32) \times 5/9$)Hematocrit: $\text{fraction} \rightarrow \text{\%}$ (multiply by 100)Other: Alveolar $\text{O}_2$ formula applied.âš ï¸ Basic Outlier Filters$\text{SpO}_2$: $0â€“100$$\text{FiO}_2$: $20â€“100$Hematocrit: $\leq 100\%$Glucose, Lactate: $\leq 10,000$4. Urine Output RateSourceFileLogicFormulasOutputicu/outputevents.csv.gzIrrigant instilled must be subtracted ($\text{GU Irrigant Volume In} \times -1$).$$\text{Urine Rate} (\text{mL/kg/hr}) = \frac{\text{Total Output}}{\text{Time Elapsed} \times \text{Weight} (\text{kg})}$$Staging Windows: Cumulative rates calculated for 6h, 12h, and 24h intervals.5. Vital SignsVariableItem IDsSource FileStandardizationAll VitalsHR, BP (Inv/NIBP), RR, SpOâ‚‚, Glucose, Tempicu/chartevents.csv.gzFor BP, average of all accepted invasive ($\text{ART}$) and noninvasive ($\text{NIBP}$) readings is taken (per $\text{ACC}/\text{AHA}$ guideline).Reference: MIT-LCP vitalsign.sqlâš ï¸ Outlier Filters$\text{HR}$: $0â€“300$$\text{SBP}/\text{DBP}/\text{MAP}$ (Inv & NIBP): $\text{SBP} < 400$, $\text{DBP} < 300$, $\text{MAP} < 300$$\text{RR}$: $0â€“70$$\text{SpO}_2$: $0â€“100$$\text{Temp}$: $70â€“120 \text{ Â°F}$ or $10â€“50 \text{ Â°C}$6. Body Surface Area (BSA)Input DataFormulaRangeDurationBest weight + Best height per stayDuBois: $0.007184 \times \text{weight}^{0.425} \times \text{height}^{0.725}$$0â€“4 \text{ m}^2$Static: Value remains fixed for the entire $\text{ICU}$ stay.7. Cardiac Output (CO)VariableItem IDsSource FileCalculationFiltersCOThermodilution, continuous $\text{CO}$, $\text{PiCCO}$, $\text{NICOM}$, $\text{Impella}$icu/chartevents.csv.gzAverage taken across modalities.$0.5â€“20 \text{ L/min}$Cardiac Index (CI)â€”â€”$\text{CI} = \text{CO} / \text{BSA}$$\text{CI} < 6 \text{ L/min/m}^2$8. VasopressorsSourceFileItem IDsReferenceKey LogicMedsicu/inputevents.csv.gzEpinephrine, dopamine, phenylephrine, norepinephrine, vasopressinMIT-LCP medication concepts$\text{COALESCE}(\text{rate}, 0)$âš–ï¸ Unit & $\text{NE}$-Equivalent ConversionsConversionLogic$\text{mg/min} \rightarrow \text{mcg/min}$$\times 1000$$\text{units/min} \rightarrow \text{units/hr}$$\times 60$Norepinephrine-Equivalent ($\text{NE}$)-DoseEpinephrine: $1:1$ â€¢ Phenylephrine: $/10$ â€¢ Dopamine: $/100$ â€¢ Vasopressin: $0.4 \text{ units/min} = 1 \text{ NE}$-equivalent9. Mechanical Circulatory Support (MCS)MCS DeviceItem IDs (Chartevents)Item IDs (Procedureevents)IABP$\text{NA}$$224272$Impella$224314, 229897, 229898$$\text{NA}$ECMO$224660, 229529, 229530$$\text{NA}$VAD$\text{NA}$$220125, 220128, 223775, 229836, 229859, 229895$Sources: icu/chartevents.csv.gz and icu/procedureevents.csv.gz.Part 2. Cohort Construction Pipeline ðŸ—ï¸StepLogicSourceResult Counts1. Initial CS IdentificationICD codes matching cardiogenic shock keywords (e.g., 78551, R570, T8111XA)diagnoses_icd.csv2,269 subject_id / 2,438 hadm_id2A. Adult Patientsanchor_age > 18patients.csv2B. $\text{ICU}$ Stay Duration$\text{los} > 1$ day ($\text{los} > 24$ hours)icustays.csvCombined Cohort CountsVariableCountsubject_id1,976hadm_id2,105stay_id2,531Part 3. Table-by-Table Final CountsThis table summarizes the final counts after applying all preprocessing filters and joins.Tablesubject_idhadm_idstay_idNotesweight_durations1,9702,0962,458$\text{height}$ joined, filtered $>0$_height1,6201,7071,760With $\text{cm}$ filter$\text{BSA}$1,9702,0962,458Joined $\text{height}+\text{weight}$vitalsign1,9762,1052,531Includes $\text{BP}$ ranking logicbloodgas1,8811,993â€”$\text{labevents} + \text{chartevents}$urine_output1,9282,0522,453Before rate calculationurine_output_rate1,9282,0522,453Staging 6/12/24hcardiac_output681688708From $\text{chartevents}$cardiac_index1,9512,0742,433$\text{CI} = \text{CO}/\text{BSA}$Mechanical Circulatory Support (MCS) CountsDeviceSourcesubject_id Range$\text{IABP}$procedureevents$385â€“413$$\text{ECMO}$procedureevents$32â€“33$$\text{Impella}$chartevents$8$$\text{VAD}$chartevents$12â€“14$Part 4. Hypotension & Severity Event DetectionHypotension EventsDefinition: $\text{SBP} < 90$ or $\text{MAP} < 65$.Grouping: Episodes grouped by $\geq 30 \text{ min}$ spacing.Timestamp Logic: Prioritize invasive $\text{BP} > \text{NIBP} > \text{ART}$.Metricsubject_id Count$\text{num\_sbp\_less90}$1,883$\text{num\_map\_less65}$1,915$\text{hypotension\_timestamps}$1,939Part 5. Lactate & $\text{pH}$ SubsetsSubset Filtersubject_id Counthadm_id Count$\text{pH}$ events (total)1,8801,992$\text{pH} < 7.2$648655$\text{pH} < 7.3$1,2301,259$\text{pH} < 7.4$1,7151,789$\text{lactate}$ events (total)1,8401,943$\text{lactate} > 2$1,5231,585$\text{lactate} > 1.9$1,5581,623
